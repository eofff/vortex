# VORTEX project
## Описание
Данный проект является тестовым заданием в компанию vortex
Задание располагается по ссылке: https://docs.google.com/document/d/1OvfY3SlGeQAfeSf2UKsw9IRkamCaFi5mIH2b1jaDcnc/edit

Предполагается что разработанный сервис заполняется данными о клиентах и управляется другим сервисом, поэтому данные о клиентах он хранит непосредственно в ОЗУ в Map

## Структура проекта
Основными пакетами являются:
repository: инкапсулирует работу с данными, паттерн "репозиторий"
repository_mock: позволяет создавать mock объекты репозиториев с идентичным интерфейсом, для тестирования приложения, не задействуя БД во время запуска юнит тестов
services: пакет основной логики, содержащий сервисы
services_mock: пакет заглушек сервисов
services_test: пакет тестов сервисов
controllers: набор контроллеров

## Сборка и тестирование
git clone github.com/eofff/vortex
go build
go test ./...

## Конфигурирование приложения
По умолчанию, если не объявлена переменная окружения PROD, приложение применит переменные среды из файла dev.env, для указания кастомных параметров рекомендуется в объявить все переменные из этого файла с необходимыми значениями, а так же переменную PROD с любым значением

Так же, в репозитории предоставлен Dockerfile, он предназначен для развёртывания приложения в kubernetes и подразумевает конфигурацию через переменные среды

## api
api приложения расположено в корневом url /
формат передачи параметров -- json

модель пользователя в json имеет следующие поля:
id          int64
clientName  string
version     int
image       string
cpu         string
memory      string
priority    float64
needRestart bool
spawnedAt   time.Time
createdAt   time.Time
updatedAt   time.Time

api имеет следующие обработчики:
AddClient() -- вызывается при http методе POST, принимает в тело запроса модель юзера
UpdateClient() -- вызывается при http методе PUT, принимает в тело запроса модель юзера
DeleteClient() -- вызывается при http методе DELETE, принимает в тело запроса модель юзера
UpdateAlgorithmStatus() -- вызывается при http методе GET, не принимает параметров
